<!DOCTYPE html>
<html>
<head>
    <meta charset='utf-8'>
    <meta http-equiv='X-UA-Compatible' content='IE=edge'>
    <title>Validato!</title>
    <meta name='viewport' content='width=device-width, initial-scale=1'>
    <script src='js/dist/bundle.js'></script>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.0/dist/css/bootstrap.min.css" integrity="sha384-B0vP5xmATw1+K9KRQjQERJvTumQW0nPEzvF6L/Z6nronJ3oUOFUFpCjEUQouq2+l" crossorigin="anonymous">

</head>
<body>

    <div class="container my-3">


        <form id="formId" action="#">
            <div class="form-group">
                <label for="field_name">Full name</label>
                <input type="text" class="form-control" name="field_name" id="field_name" placeholder="Your full name">
            </div>
            <div class="form-group">
                <label for="field_email">Email address</label>
                <input type="text" class="form-control" name="field_email" id="field_email" placeholder="Your email address">
            </div>
            <div class="form-group">
                <label for="field_phoneNumber">Phone number</label>
                <input type="text" class="form-control" name="field_phoneNumber" id="field_phoneNumber" placeholder="Your phone number">
            </div>
            
            <input type="submit" class="btn btn-primary" />
    
        </form>
        
    </div>
    

    <script>


        var validator = new FormValidator("formId", {
            
            fieldWrapperClassname: "form-group",
            fieldWrapperValidClassname: "is-valid",
            fieldWrapperInvalidClassname: "is-invalid",
            fieldValidClassname: "is-valid",
            fieldInvalidClassname: "is-invalid",
            showFieldMessage: true,
            fieldMessageHTML: "<div class=\"invalid-feedback text-danger d-block\">{{message}}</div>",
            // TODO: success message!

            fields: [
                {
                    id: "field_name", // my be array if tyoe radio (equal names, different ids, same value)
                    group: "personalData",
                    helpText: "Seu nome",
                    rules: [
                        {
                            name: 'required'
                        }
                    ],
                    events: {
                        onBeforeFieldValidate: function(field) {
                            // console.log('onBeforeFieldValidate do nome', field) 
                        },
                        onFieldValidate: function(field) {
                            // console.log('onFieldValidate do nome', field) 
                        }
                    },

                    fieldWrapperClassname: "form-group",
                    fieldWrapperValidClassname: "is-valid",
                    fieldWrapperInvalidClassname: "is-invalid",
                    fieldValidClassname: "is-valid",
                    fieldInvalidClassname: "is-invalid",
                    showFieldMessage: true,
                    fieldMessageHTML: "<div class=\"invalid-feedback text-danger d-block\">{{message}}</div>",
                    
                },
                {
                    id: "field_email", // my be array if tyoe radio (equal names, different ids, same value)
                    group: "personalData",
                    helpText: "Seu email",
                    rules: [
                        {
                            name: 'required'
                        },
                        {
                            name: 'email'
                        }
                    ],
                    events: {
                        onBeforeFieldValidate: function(field) {
                            // console.log('onBeforeFieldValidate do nome', field) 
                        },
                        onFieldValidate: function(field) {
                            // console.log('onFieldValidate do nome', field) 
                        }
                    },

                },
                {
                    id: "field_phoneNumber", // my be array if tyoe radio (equal names, different ids, same value)
                    group: "personalData",
                    helpText: "Digite aqui algum número para falarmos com você",
                    rules: [
                        {
                            name: 'minLength',
                            parameter: 1,
                            fn: function(value, parameter, cb) {
                                cb(value.length >= parameter)
                            }
                        },
                        {
                            name: 'maxLength',
                            parameter: 2,
                            message: "Tamanho maior que o permitido",
                            fn: function(value, parameter, cb) {
                                let h = function() {
                                    cb(value.length <= parameter)
                                }
                                setTimeout(h, 2000)
                            }
                        }
                    ],
                    events: {
                        onBeforeFieldValidate: function(field){
                            // console.log('onBeforeFieldValidate do telefone', field) 
                        },
                        onFieldValidate: function(field){
                            // console.log('onFieldValidate do telefone', field) 
                        }
                    }
                }

            ],

            submit: function(validator, cb) {
                // console.log('Submitting...');
                setTimeout(function() {
                    cb(true)
                }, 3000)
            },

            events: {   
                onBeforeSubmit: function(validator){
                    // console.log('on before formSubmit!', )
                },
                onSubmit: function(validator){
                    // runs when form is submitted
                    // console.log('on formSubmit!')

                }
            }

        })

    </script>

</body>
</html>